ã€Ž ð˜¿ð™ˆð™• ã€

ã€Š ð˜‹ð˜”ð˜¡ ð˜°ð˜³ ð˜¥ð˜¦ð˜®ð˜ªð˜­ð˜ªð˜µð˜¢ð˜³ð˜ªð˜»ð˜¦ð˜¥ ð˜»ð˜°ð˜¯ð˜¦ (ð˜´ð˜°ð˜®ð˜¦ð˜µð˜ªð˜®ð˜¦ð˜´ ð˜³ð˜¦ð˜§ð˜¦ð˜³ð˜³ð˜¦ð˜¥ ð˜µð˜° ð˜¢ð˜´ ð˜¢ ð˜±ð˜¦ð˜³ð˜ªð˜®ð˜¦ð˜µð˜¦ð˜³ ð˜¯ð˜¦ð˜µð˜¸ð˜°ð˜³ð˜¬ ð˜°ð˜³ ð˜´ð˜¤ð˜³ð˜¦ð˜¦ð˜¯ð˜¦ð˜¥ ð˜´ð˜¶ð˜£ð˜¯ð˜¦ð˜µ)
ð˜ªð˜´ ð˜¢ ð˜±ð˜©ð˜ºð˜´ð˜ªð˜¤ð˜¢ð˜­ ð˜°ð˜³ ð˜­ð˜°ð˜¨ð˜ªð˜¤ð˜¢ð˜­ ð˜´ð˜¶ð˜£ð˜¯ð˜¦ð˜µð˜¸ð˜°ð˜³ð˜¬ ð˜µð˜©ð˜¢ð˜µ ð˜¤ð˜°ð˜¯ð˜µð˜¢ð˜ªð˜¯ð˜´ ð˜¢ð˜¯ð˜¥ ð˜¦ð˜¹ð˜±ð˜°ð˜´ð˜¦ð˜´ ð˜¢ð˜¯ ð˜°ð˜³ð˜¨ð˜¢ð˜¯ð˜ªð˜»ð˜¢ð˜µð˜ªð˜°ð˜¯'ð˜´ ð˜¦ð˜¹ð˜µð˜¦ð˜³ð˜¯ð˜¢ð˜­-ð˜§ð˜¢ð˜¤ð˜ªð˜¯ð˜¨ 
ð˜´ð˜¦ð˜³ð˜·ð˜ªð˜¤ð˜¦ð˜´ ð˜µð˜° ð˜¢ð˜¯ ð˜¶ð˜¯ð˜µð˜³ð˜¶ð˜´ð˜µð˜¦ð˜¥, ð˜¶ð˜´ð˜¶ð˜¢ð˜­ð˜­ð˜º ð˜­ð˜¢ð˜³ð˜¨ð˜¦ð˜³, ð˜¯ð˜¦ð˜µð˜¸ð˜°ð˜³ð˜¬ ð˜´ð˜¶ð˜¤ð˜© ð˜¢ð˜´ ð˜µð˜©ð˜¦ ð˜ð˜¯ð˜µð˜¦ð˜³ð˜¯ð˜¦ð˜µ ã€‹

â—â— ð˜ð˜§ ð˜ºð˜°ð˜¶ ð˜¥ð˜ªð˜¥ ð˜•ð˜ˆð˜› ð˜°ð˜¯ ð˜™ð˜°ð˜¶ð˜µð˜¦ð˜³ (ð˜¤ð˜°ð˜¯ð˜µð˜³ð˜°ð˜­.ð˜ªð˜¯ð˜°ð˜·ð˜¢.ð˜±ð˜µ) ð˜ºð˜°ð˜¶ ð˜®ð˜¢ð˜º ð˜¤ð˜°ð˜¯ð˜µð˜ªð˜¯ð˜¶ð˜¦ ð˜µð˜©ð˜¦ ð˜ªð˜¯ð˜´ð˜µð˜³ð˜¶ð˜¤ð˜µð˜ªð˜°ð˜¯ð˜´.

â‡¨ sudo hostnamectl set-hostname www.inova.pt (Set DMZ Domain)
â‡¨ sudo su - (Root)

#################################################
##                                             ##
##                    NAT                      ##
##                                             ##
#################################################

â‡¨ nano /etc/netplan/50-cloud-init.yaml
  > dhcp4-overrides:
        use-dns: false
        use-routes: false
    nameservers:
        addresses: [ 8.8.8.8 ]           
    routes:
        - to: 0.0.0.0/0
          via: 172.31.128.100 (GATEWAY IP)
          on-link: true
â‡¨ netplan try
â‡¨ netplan apply
â‡¨ ping 1.1.1.1 (If it ping, you have internet acess)
â‡¨ apt update && apt upgrade -y

â—â— After making DNS you can continue this step.

â‡¨ nano /etc/netplan/50-cloud-init.yaml
  #CHANGE 8.8.8.8 TO DNS IP (172.31.128.100)
â‡¨ netplan try
â‡¨ netplan apply
â‡¨ nslookup www.inova.pt

#################################################
##                                             ##
##                VSFTPD (SETUP)               ##
##                                             ##
#################################################

â‡¨ passwd ubuntu
â‡¨ apt install vsftpd
â‡¨ nano /etc/vsftpd.conf
   > listen=NO to listen=YES
   > listen_ipv6=YES to listen_ipv6=NO
   > #write_enable=YES to write_enable=YES
   > Change CA's Name (Default is snake oil) copy from router and paste here (dmz)
   
   #Add this in the end of documment (Impiclit FTP)
   > pasv_enable=YES
   > pasv_address=52.42.171.25 (change this to your public ip ftp)
   > pasv_min_port=PORT1 (10000)
   > pasv_max_port=PORT2 (10100)
   > allow_anon_ssl=NO
   > force_local_data_ssl=YES
   > force_local_logins_ssl=YES
   > ssl_tlsv1=YES
   > ssl_sslv2=NO
   > ssl_sslv3=NO
   > require_ssl_reuse=NO
   > ssl_ciphers=HIGH
   > implicit_ssl=YES
   > listen_port=990
â‡¨ systemctl restart vsftpd
â‡¨ Connect Via Filezilla to check Connection.


#################################################
##                                             ##
##           NGINX SETUP (HTTP/HTTPS)          ##
##                                             ##
#################################################

â‡¨ apt install nginx
â‡¨ apt install ssl-cert
â‡¨ cd /etc/nginx/snippets/
â‡¨ cp snakeoil.conf inova.conf
â‡¨ nano inova.conf
  > Change CA'S name
â‡¨ cd ../sites-available/
â‡¨ cp default secure
â‡¨ nano secure
  > Eleminate Lines with :80
  > Uncomment lines with :443
  > Uncommend snippets/snakeoil.conf;
  > Change snakeoil.conf to inova.conf
  >  change html to htmls;
â‡¨  cd /var/www/
â‡¨  cp -r html/ htmls
â‡¨ cd html/
  > index.nginx-debian.html
â‡¨ cd htmls/
  > index.nginx-debian.html
â‡¨ cd /etc/nginx/sites-enabled/
â‡¨ ln -s /etc/nginx/sites-available/secure secure
â‡¨ systemctl restart nginx



#################################################
##                                             ##
##                CERTS TO NGINS               ##
##                                             ##
#################################################

â‡¨  apt install easy-rsa
â‡¨ cp -r /usr/share/easy-rsa/ /etc/
â‡¨ cd /etc/easy-rsa/
â‡¨ nano openssl-easyrsa.cnf
  > Comment RANDFILE
â‡¨  ./easyrsa init-pki
â‡¨  ./easyrsa gen-req www.inova.pt nopass
â‡¨  cd pki/reqs/
â‡¨  cat www.inova.pt.req (copy)

##Go to server to sign request!
â‡¨  cd /etc/easy-rsa/3/pki/reqs
â‡¨  nano www.inova.pt.req (PASTE HERE)
â‡¨ cd ../..
â‡¨ ./easyrsa sign-req server www.inova.pt
â‡¨ cd pki/issued
â‡¨ clear
â‡¨ cat www.inova.pt.crt (COPY)

#BACK TO DMZ
â‡¨ cd ../private
â‡¨ nano www.inova.pt.crt (PASTE HERE)
â‡¨ Now CP .crt and .key to the destination folders!
  > /etc/ssl/certs/www.inova.pt.crt;
  > /etc/ssl/private/www.inova.pt.key;
  
  
  
#################################################
##                                             ##
##                EFS SETUP                    ##
##                                             ##
#################################################

â‡¨ AWS:
  â‡¨Create File System;
  â‡¨ Name | Choose VPC | One ZOne| Choose Zone| 
  â‡¨ View Details
  â‡¨ Attach
  â‡¨ Mount Via IP
  â‡¨ Go to DMZ and Paste the command.

